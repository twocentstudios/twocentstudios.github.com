<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Count Biki - Drill Japanese Numbers</title>

  <meta property="og:type" content="article" />
  <meta property="og:title" content="Count Biki - Drill Japanese Numbers" />
  <meta property="og:url" content="https://twocentstudios.com/2023/10/22/count-biki-japanese-numbers/" />
  
    <meta property="og:article:published_time" content="2023-10-22T04:20:00+09:00" />
  
  
    <meta property="og:image" content="https://twocentstudios.com/images/xxx.png" />
  
  
  <link href='https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;350;400;600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://twocentstudios.com/2023/10/22/count-biki-japanese-numbers/">
  <link rel="alternate" type="application/rss+xml" title="twocentstudios" href="https://twocentstudios.com/feed.xml" />
</head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NE82N02W8S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NE82N02W8S');
</script>

  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">twocentstudios</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/blog/">Blog</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/portfolio/">Portfolio</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Count Biki - Drill Japanese Numbers</h1>
    <p class="post-meta">Oct 22, 2023</p>
  </header>

  <article class="post-content">
    <p>I‚Äôm proud to present my latest iOS app, Count Biki.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-icon.png" width="" height="300" alt="Count Biki app icon" title="Count Biki app icon" /><div class="caption-text">Count Biki app icon</div></div>

<p>In this post I‚Äôll talk about the background of the app, go over a few high level implementation details, and then share what may be next for the app.</p>

<p>Japanese learners can download the app from the <a href="https://apps.apple.com/us/app/count-biki/id6463796779">App Store</a>.</p>

<p>Like many of my other apps, Count Biki is open source on <a href="https://github.com/twocentstudios/count-biki">GitHub</a>.</p>

<h2 id="background">Background</h2>

<p>Counting to ten is one of the first things we learn in a foreign language. Each language has its own rules about how numbers combine to form larger numbers, how they combine with objects, and how they associate with the concept of time.</p>

<p>When I first moved to Japan, every couple shops or restaurants I‚Äôd visit wouldn‚Äôt have a display at the cash register. The cashier would speak my 4 or 5 digit total aloud at native speed and I‚Äôd be lucky to get the first digit. I‚Äôd panic and fumble through the transaction, then forget about it until the next time. It was tough skill to practice.</p>

<p>Japanese has unique readings for days of the month, e.g. July 1st, October 9th, etc. We learn them in the 101-level course, but in daily conversation I‚Äôd rarely need to enumerate each ordinal. The knowledge gracefully slipped away as it usually does.</p>

<p>Fast forward to now, and there are more language learning apps than ever. Even ones that help with numbers. However, I wanted a more streamlined way to practice all types of numbers, and I wanted to focus on Japanese and ensure I could practice the uniquely difficult parts of the language.</p>

<p>In cases like dealing with money, the numbers are essentially random. Therefore, I didn‚Äôt want to rely on just hard coding a couple dozen entries. Computers are great at:</p>

<ol>
  <li>generating random numbers</li>
  <li>generating speech from text</li>
  <li>generating spelled out text from numbers</li>
</ol>

<h2 id="planning">Planning</h2>

<p>I made a big list of every number-adjacent concept in the language and the different modes I wanted to practice.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-enumerating-concepts.jpg" width="" height="400" alt="Brainstorming which topics I could cover and how I could test them" title="Brainstorming which topics I could cover and how I could test them" /><div class="caption-text">Brainstorming which topics I could cover and how I could test them</div></div>

<p>This was a bit overwhelming at first.</p>

<p>I did a bit of prototyping in a Swift Playground to figure out which of Apple‚Äôs APIs ‚Äì speech recognition, numeral-to-text transliteration ‚Äì were feasible to use.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-swift-playground-prototyping.jpg" width="" height="400" alt="Starting in Swift Playgrounds to test out the system APIs" title="Starting in Swift Playgrounds to test out the system APIs" /><div class="caption-text">Starting in Swift Playgrounds to test out the system APIs</div></div>

<p>I decided to start with the flow of:</p>

<ol>
  <li>generate a random number</li>
  <li>speak the number out loud</li>
  <li>the user types the number on a 10-key keyboard</li>
</ol>

<p>My first sketches looked like this:</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-sketch-home.jpg" width="" height="" alt="The first UI sketch in my notebook" title="The first UI sketch in my notebook" /><div class="caption-text">The first UI sketch in my notebook</div></div>

<h2 id="prototyping">Prototyping</h2>

<p>And the first prototype looked like this:</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-first-prototype.jpg" width="" height="450" alt="The first prototype" title="The first prototype" /><div class="caption-text">The first prototype</div></div>

<p>I made a fun little animated barber pole to imply that review sessions were infinite:</p>

<video src="/images/count-biki-animated-barber-pole.mov" controls="" preload="none" poster="/images/count-biki-animated-barber-pole-poster.png" width="100%"></video>

<p>And cleaned up the design a little bit:</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-second-prototype.jpg" width="" height="450" alt="The cleaned up prototype" title="The cleaned up prototype" /><div class="caption-text">The cleaned up prototype</div></div>

<h2 id="designing-an-original-character">Designing an original character</h2>

<p>You may have noticed in the top right corner of the above sketch, there‚Äôs a little character I marked ‚Äúthe count‚Äù.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-sketch-the-count.jpg" width="" height="" alt="A sketch of The Count" title="A sketch of The Count" /><div class="caption-text">A sketch of The Count</div></div>

<p>I wanted to riff on Duolingo‚Äôs use of characters to motivate the learner and keep the app lighthearted. Duolingo <a href="https://blog.duolingo.com/world-character-visemes/">uses a tool</a> called <a href="https://rive.app/">Rive</a> (although I didn‚Äôt know this at the time). I‚Äôve been dabbling in <a href="https://blender.org">Blender</a> for 3D modeling for the last few years, so I thought I‚Äôd experiment with creating a 3D modeled character and animating it with Apple‚Äôs native SceneKit.</p>

<p>Of course, this little maneuver set me back a couple weeks üòÖ. And to be clear, adding an animated character to the app was way more of an ‚ÄúI‚Äôm interested in learning something new‚Äù rather than ‚Äúthe app will be useless without this feature‚Äù. However, this did make naming and branding and making an icon for the app way easier!</p>

<h3 id="animated-character-proof-of-concept">Animated character proof of concept</h3>

<p>Before spending an awful lot of time perfecting a character and its animations, I wanted to get a proof of concept working that covered the entire use case end-to-end, namely:</p>

<ol>
  <li>a 3D-character model</li>
  <li>textured with either physically-based shaders or UV-unwrapping on a bitmap</li>
  <li>rigged with at least one bone</li>
  <li>with multiple animations defined in Blender</li>
  <li>with lighting and a camera</li>
  <li>exportable from Blendeer and importable with Xcode</li>
  <li>displayable in a SceneView in SwiftUI</li>
  <li>triggering each animation on demand from a SwiftUI button</li>
</ol>

<p>This is a lot of new concepts for me! Some of the Blender tasks I‚Äôd done once or twice under the guidance of random YouTube tutorials, but the SceneKit integration was completely unknown.</p>

<p>I started by modeling a character with only 3 objects, UV-unwrapping him, and painting the texture.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-blender-proto-modeling.png" width="" height="" alt="Modeling and UV-unwrapping the prototype character" title="Modeling and UV-unwrapping the prototype character" /><div class="caption-text">Modeling and UV-unwrapping the prototype character</div></div>

<p>Then I rigged him with a single bone and added 3 animations (doing my best to understand the NLA editor was).</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-blender-proto-animation.png" width="" height="" alt="Rigging and animating the prototype character" title="Rigging and animating the prototype character" /><div class="caption-text">Rigging and animating the prototype character</div></div>

<p>Here‚Äôs the ‚Äúyou got the question incorrect‚Äù animation rendered out of Blender for reference:</p>

<video src="/images/count-biki-blender-proto-incorrect.mp4" controls="" preload="none" poster="/images/count-biki-blender-proto-incorrect-poster.png" width="100%"></video>

<p>Next was probably the hardest part of the entire process: the exporting/importing dance. Like <a href="https://xkcd.com/979/">DenverCoder9</a>, I found only a <a href="https://developer.apple.com/forums/thread/79321?answerId=751657022#751657022">few faint traces</a> on the internet of how I‚Äôd go about getting both a model and its separate animations out of Blender and into SceneKit. I naively followed the instructions from the thread, made some tweaks to the SceneKit file, tweaked the camera and lighting, mocked out a SwiftUI view with some buttons, and the result was:</p>

<video src="/images/count-biki-blender-proto-swiftui.mov" controls="" preload="none" poster="/images/count-biki-blender-proto-swiftui-poster.png" height="600"></video>

<p>I noticed that the animations were more subdued in app version than they were in the Blender version. I wasn‚Äôt sure why, but I decided to move on since it was a gamble of whether the subtle differences in the production version of the model would surface the same problem.</p>

<h3 id="animated-character-production-version">Animated character production version</h3>

<p>Now that I had a working proof of concept, it was time to do the hard work of actually designing the real character.</p>

<p>First, I did a short interlude of powering through a few character modeling and animation tutorials on YouTube. <a href="https://www.youtube.com/watch?v=PTWV67qUX2k">This long tutorial</a> from Imphenzia was particularly influential and useful.</p>

<p>Like many ideas, I can‚Äôt say exactly where or when all the parts of the Count Biki branding came to me. I knew I wanted to riff on the <a href="https://en.wikipedia.org/wiki/Count_von_Count">Count von Count</a> character from Sesame Street. However, I also wanted to incorporate Japanese counters. I always thought Âåπ („Å≤„Åç hiki), the small animals counter was kind of cute sounding. The version for 3 small animals is pronounced biki („Å≥„Åç).</p>

<p>Why a rabbit? I can‚Äôt remember for sure, but the ironic part is that rabbits are traditionally <em>not</em> counted with Âåπ („Å≤„Åç hiki), but ÁæΩ („Çè wa) due to <a href="https://www.tofugu.com/japanese/japanese-counter-wa/#rabbits">rumored historical reasons</a>. Regardless, a cute, vampiric rabbit felt like a unique take.</p>

<p>I did some Dribbble hunting for references and mood board creation, did a few sketches (that are much too embarrassing to post publicly), then began 3D modeling.</p>

<p>My first attempt was‚Ä¶ not great. Luckily, a few friends gave some very useful feedback and my next iteration was much better.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-first-render.jpg" width="" height="" alt="Revised model of Count Biki" title="Revised model of Count Biki" /><div class="caption-text">Revised model of Count Biki</div></div>

<p>I specifically modeled Biki sitting so I could simplify the rig. Rigging, or adding virtual bones that stretch the polygons and are easier to animate, was my next step.</p>

<p>I can‚Äôt emphasize enough how complex rigging is. It may seem like an afterthought, but it‚Äôs an entire division at 3D studios, and for good reason. Below is Biki‚Äôs humble rig showing his suit in weight painting mode.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-rig.jpg" width="" height="" alt="Biki with his rig bones visible" title="Biki with his rig bones visible" /><div class="caption-text">Biki with his rig bones visible</div></div>

<p>With all that in place, I moved on to the animation part. Even though I‚Äôd never done keyframe animation in Blender for a 3D character before, getting the basics done felt surprisingly natural to me. This was probably the most fun part of the entire process.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-blender-animation.jpg" width="" height="" alt="Animating Biki one keyframe at a time" title="Animating Biki one keyframe at a time" /><div class="caption-text">Animating Biki one keyframe at a time</div></div>

<p>The final result for the ‚Äúyou got the answer correct‚Äù animation looked like this straight out of Blender:</p>

<video src="/images/count-biki-blender-animation-correct.mov" controls="" preload="none" poster="/images/count-biki-blender-animation-correct-poster.png" width="100%"></video>

<p>Getting the model and animations out of Blender‚Ä¶ this part was dreadful. I tried so hard to use Apple‚Äôs newest, most blessed workflow of USDZ, but some combination of the Blender exporter and the Xcode importer made this impossible. In the end, I used the same combination of one DAE (Collada) file with just the model and armature, and one DAE file per animation.</p>

<p>I imported the model file into Xcode, creating a new SceneKit scene, then painstakingly re-added the camera, lights, and materials, all of which look and work differently (read: worse) in SceneKit than they do in Blender. I couldn‚Äôt get Biki to look as clean in the app as he does in Blender.</p>

<div class="caption-wrapper"><img class="caption" src="/images/count-biki-model-scn.png" width="" height="" alt="Biki moved into his new home in an SCN file" title="Biki moved into his new home in an SCN file" /><div class="caption-text">Biki moved into his new home in an SCN file</div></div>

<p>I exported the animations next. When playing them back in the app, I found that some polygons on the suit were getting caught during the animation. This was somewhat expected due to my inexperience modeling and rigging and weight painting. I powered my way through these issues and ended up with the final result: Biki in the test app, playing his idle animation and reacting to questions being answered right and wrong.</p>

<video src="/images/count-biki-test-app-demo.mov" controls="" preload="none" poster="/images/count-biki-test-app-demo-poster.png" height="800"></video>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">twocentstudios</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li><a href="mailto:chris@twocentstudios.com">chris@twocentstudios.com</a></li>
          
          <li>
            <a href="https://github.com/twocentstudios">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>
          

          <li>
            <a href="https://hackyderm.io/@twocentstudios">
              <span class="icon">
                <svg viewBox="0 0 24 24">
                  <path fill="#828282" d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>

          
          <li>
            <a href="https://twitter.com/twocentstudios">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>
          
        </ul>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
