<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Closing the Loop on iOS with Claude Code</title>

  <meta property="og:type" content="article" />
  <meta property="og:title" content="Closing the Loop on iOS with Claude Code" />
  <meta property="og:url" content="https://twocentstudios.com/2025/12/27/closing-the-loop-on-ios-with-claude-code/" />
  
    <meta property="og:article:published_time" content="2025-12-27T15:37:01-06:00" />
  
  
    <meta property="og:image" content="https://twocentstudios.com/images/closing-loop-cc-hero.jpg" />
  

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Closing the Loop on iOS with Claude Code" />
  
    <meta name="twitter:image" content="https://twocentstudios.com/images/closing-loop-cc-hero.jpg" />
  

  <link href='https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;350;400;600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://twocentstudios.com/2025/12/27/closing-the-loop-on-ios-with-claude-code/">
  <link rel="alternate" type="application/rss+xml" title="twocentstudios" href="https://twocentstudios.com/feed.xml" />
</head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-NE82N02W8S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-NE82N02W8S');
</script>

  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">twocentstudios</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/blog/">Blog</a>
          
        
          
        
          
        
          
          <a class="page-link" href="/portfolio/">Portfolio</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="/tools/">Tools</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Closing the Loop on iOS with Claude Code</h1>
    <p class="post-meta">Dec 27, 2025</p>
  </header>

  <article class="post-content">
    <p>Closing the loop means giving Claude Code a way to view the output of its work. I’ll be focusing on iOS app development workflows.</p>

<p><strong>Step 1</strong> of closing the loop: <strong>building</strong> a target so that Claude Code can see the errors and warnings. And doing so in a way that preserves the build cache (clean builds take a long time). This allows Claude Code to see its syntax errors and fix them before you review its work.</p>

<p><strong>Step 2</strong> of closing the loop: <strong>installing &amp; launching</strong> on the simulator. This saves you the step of opening Xcode and hitting build &amp; run, letting you test each proposed code change right away.</p>

<p><strong>Step 3</strong> of closing the loop: reading the <strong>console &amp; log output</strong>. This allows Claude Code to proactively verify codepaths and reactively do debugging.</p>

<p><strong>Step 4</strong> of closing the loop: <strong>controlling &amp; viewing</strong> the iOS simulator. This allows Claude Code to step through entire flows, evaluate visual designs, and generate its own logs.</p>

<p><strong>Step 5</strong> of closing the loop: building, installing, launching, and logging <strong>on device</strong>. This allows you and Claude Code to test Apple Frameworks that are absent or broken on the simulator.</p>

<div class="caption-wrapper"><img class="caption" src="/images/closing-loop-cc-hero.jpg" width="" height="500" alt="Building, installing, launching on the simulator from Claude Code" title="Building, installing, launching on the simulator from Claude Code" /><div class="caption-text">Building, installing, launching on the simulator from Claude Code</div></div>

<h3 id="disclaimers-before-we-start">Disclaimers before we start</h3>

<p>Agentic tooling is changing rapidly with model and agent versions. I’ll cover each step as thoroughly as I can. The strategies in this post cover about a month of work in <strong>December 2025</strong> with Claude <strong>Opus 4.5</strong> inside Claude Code v2.0.76 (and several versions below). I used <strong>Xcode 26.1 and 26.2</strong> on macOS 15.7.3 mostly developing for <strong>iOS 26</strong>.</p>

<p>This post is written for humans but can easily be adapted to a Skill or added to your CLAUDE.md file. The command structure will change based on how your project and schemes are set up. I outline a few different strategies that are useful in different situations, but you may only want to use one workflow as your default, or completely ignore certain steps altogether.</p>

<p>If you’ve always used a manual Xcode-based flow, trying to both understand and incorporate these steps into your workflow can be intimidating. If you’ve never working with Xcode via the command line before, start with just the first step for a while. The best part about this workflow is you can seamlessly dip in and out of using Xcode and there’s no switching cost (not even needing to do clean builds).</p>

<p>The below CLI commands also share a lot of coverage with <a href="https://github.com/cameroncooke/XcodeBuildMCP">XcodeBuildMCP</a>, a more full-service MCP-based solution. I won’t get into the pros and cons of MCPs vs CLIs (its author has already <a href="https://www.async-let.com/posts/my-take-on-the-mcp-verses-cli-debate/">written about that</a>).</p>

<p>I’m specifically targeting this post to Claude Code and Opus 4.5 based on my first-hand knowledge of their combined capabilities. Other harness and model pairs will work with most of the commands in this post. The command backgrounding feature in step 3 is the only potential snag for some harnesses.</p>

<h2 id="step-1-building">Step 1: Building</h2>

<p>Allowing Claude Code to build after every proposed change is a requirement for agentic workflows. Like it does for human developers, the compiler catches dumb syntax errors and, with Swift concurrency, even data races. The alternative is tabbing back over to Xcode, hitting cmd+b, waiting, copying and pasting error messages into the terminal; a massive waste of human time.</p>

<h3 id="prerequisites">Prerequisites</h3>

<h4 id="move-deriveddata-location-to-your-project-folder-optional">Move DerivedData location to your project folder (optional)</h4>

<p>Moving DerivedData to a location inside your project folder is perhaps an unusual suggestion, but it has several benefits for an agentic workflow:</p>

<ul>
  <li><strong>Permissions</strong>: you’ll encounter fewer permissions dialogs when Claude is reading inside the project folder that you’re presumably running it in. Most devs expect DerivedData to be cleared regularly so it’s safe.</li>
  <li><strong>Git worktrees</strong>: An advanced technique is to use <a href="https://git-scm.com/docs/git-worktree">Git worktrees</a> to have independent copies of your repo. Colocating DerivedData ensures the separate repos don’t interfere with each others build artifacts.</li>
  <li><strong>Docs</strong>: The DerivedData has a full copy of your Swift Packages, including any documentation. Claude Code can do fast greps to verify syntax or find examples. In my CLAUDE.md I have a direct link for each important package:</li>
</ul>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="p">-</span> <span class="sb">`DerivedData/train-timetable/SourcePackages/checkouts/swift-composable-architecture/Sources/ComposableArchitecture/Documentation.docc`</span>
<span class="p">-</span> When using Search/Grep/etc. tools, ignore anything in the /DerivedData folder by default unless specifically looking for build artifacts or code/docs for Swift Packages used by this project
</code></pre>
</div>

<p>Before making this change, add <code class="language-plaintext highlighter-rouge">DerivedData/</code> as a line in your <code class="language-plaintext highlighter-rouge">.gitignore</code> file if it’s not already there.</p>

<p>Find the setting in Xcode Settings -&gt; Locations. Set Derived Data to “Relative” and Build Location to “Unique”. It will report <code class="language-plaintext highlighter-rouge">/DerivedData</code> as the location.</p>

<div class="caption-wrapper"><img class="caption" src="/images/closing-loop-cc-deriveddata-settings.jpg" width="" height="300" alt="DerivedData settings in Xcode" title="DerivedData settings in Xcode" /><div class="caption-text">DerivedData settings in Xcode</div></div>

<h4 id="document-project-file--scheme">Document project file &amp; scheme</h4>

<p>Build commands use your project/workspace file location and scheme name. Claude Code can find these pretty easily with tools but it’s faster to document them in CLAUDE.md.</p>

<div class="caption-wrapper"><img class="caption" src="/images/closing-loop-cc-scheme-selection.jpg" width="" height="400" alt="Finding scheme names from Xcode" title="Finding scheme names from Xcode" /><div class="caption-text">Finding scheme names from Xcode</div></div>

<h4 id="get-simulators">Get simulators</h4>

<p>I’ll assume you’ve already downloaded the iOS simulators and iOS runtime versions you’d like to use in the Xcode interface.</p>

<p>The usual command you’ll use to find the simulator you want produces a very long list, so it’s reasonable to cache your favorite simulator’s UDID so each new Claude Code session doesn’t need do this from scratch each time. “Cache” meaning note it in your CLAUDE.md file, add it as an environment variable, etc.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Get all available simulators
xcrun simctl list devices available

     -- iOS 26.1 --
         iPhone 17 Pro (89F6D0BC-E855-4BF7-A400-9C19ED7A7350) (Shutdown)
         iPhone 17 Pro Max (F1FA81FA-ED32-40C4-BD78-753254D685AC) (Shutdown)
         iPhone Air (77702E5F-85F5-4997-BA14-BC8D8F639B84) (Shutdown)
		 ...
     -- iOS 26.2 --
         iPhone 17 Pro (DB0531E0-B47E-42AC-9AAB-FEB76D3D563A) (Booted)
         iPhone 17 Pro Max (0C54CF4B-8A45-450E-AB93-B800B97BD4DA) (Shutdown)
         iPhone Air (83BECA5F-7894-4705-B198-3DCAE0C4778E) (Shutdown)
         ...
     -- ...
</code></pre>
</div>

<p>At first, you’ll probably start with a single threaded workflow, having one preferred simulator booted and in use at a time. The below command will output just the UDID for the latest iPhone Pro with the latest installed iOS version.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Get the UDID of the latest iPhone Pro (non-max) model with the latest available iOS version 
xcrun simctl list devices available | grep "iPhone.*Pro (" | tail -1 | grep -Eo '[A-F0-9]{8}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{12}'
</code></pre>
</div>

<p>Once you have more Claudes running in parallel, you’ll can ask each to find its own UDID by looking for a non-booted simulator before it starts building.</p>

<p>Note that even though some commands can be run with more vague identifiers like name, os, or “booted”, it’s much more reliable to select a UDID and use it across commands. For example: specifying <code class="language-plaintext highlighter-rouge">"platform=iOS Simulator,name=iPhone 17 Pro"</code> in the build command will pick any simulator that matches, which could be any iOS version. For the build command it’s not as big of an issue, but to ensure predictable runs I recommend using UDIDs only.</p>

<h4 id="install-xcsift">Install xcsift</h4>

<p><a href="https://github.com/ldomaradzki/xcsift">xcsift</a> is a companion parsing library for build output. You’ll be building <em>a lot</em>, and you don’t want to fill up your context with hundreds of lines of “file.swift built”. xcsift solves this by producing just the actionable errors and warnings in json.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>brew install xcsift
</code></pre>
</div>

<p>I add the <code class="language-plaintext highlighter-rouge">-w</code> flag to also include warnings in the output. I recommend browsing the <code class="language-plaintext highlighter-rouge">xcsift</code> docs to find other flags you might find useful for your project.</p>

<h3 id="building">Building</h3>

<p>OK, after all that setup, we should have all the info we need to assemble the actual build command.</p>

<p>Claude Code will be able to derive and customize the exact build command you need. I recommend doing a quick session with Claude - the goal being to produce a single, always-working command you can document somewhere and use automatically in each future session.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Example: working build command for a specific simulator
xcodebuild -project train-timetable.xcodeproj -scheme "train-timetable" -destination "platform=iphonesimulator,id=DB0531E0-B47E-42AC-9AAB-FEB76D3D563A" -derivedDataPath DerivedData -configuration Debug build 2&gt;&amp;1 | xcsift -w
</code></pre>
</div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">-project</code></strong>: path to your xcodeproj file. Use <code class="language-plaintext highlighter-rouge">-workspace</code> if you use an xcworkspace file.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">-scheme</code></strong>: scheme name we found above.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">-destination</code></strong>: for simulator, we use <code class="language-plaintext highlighter-rouge">"platform=iphonesimulator,id=$UDID"</code> where <code class="language-plaintext highlighter-rouge">id</code> is the UDID of our favorite simulator instance.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">-derivedDataPath</code></strong>: this is super important if you’ve moved the DerivedData to the project folder. Without this, the Xcode instance will be using a different directory and you’ll have super slow (clean) builds each time.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">-configuration</code></strong>: <code class="language-plaintext highlighter-rouge">Debug</code> is the default, so you don’t usually need this flag. It’s better to be explicit though because this affects the folder where your app binary will be copied to (see step 2).</li>
  <li><strong>build</strong>: the actual build command</li>
  <li><strong><code class="language-plaintext highlighter-rouge">2&gt;&amp;1 | xcsift -w</code></strong>: combines stdout and stderr and pipes them both into <code class="language-plaintext highlighter-rouge">xcsift</code> so it has access to all output. <code class="language-plaintext highlighter-rouge">-w</code> tells <code class="language-plaintext highlighter-rouge">xcsift</code> to also show build warnings, not just errors.</li>
</ul>

<p>It’s important to test your ideal build command to confirm:</p>

<ul>
  <li>It doesn’t force a clean build each time.</li>
  <li>It produces a concise set of errors and warnings.</li>
  <li>It doesn’t interfere with builds via Xcode; you should be able to build/install/run from Xcode, use other SourceKit features, etc. and not clear the build cache.</li>
</ul>

<p>In my understanding for builds, the simulator UDID (or at least simulator name) does not affect the build artifacts or app binary. However, there’s a lot going on behind the scenes so for simplicity I recommend using the same simulator UDID across all build, install, &amp; launch steps. You need to be careful if running multiple simulators from the same project folder (i.e. without git worktrees) because each <code class="language-plaintext highlighter-rouge">build</code> command will overwrite the app binary regardless of whether you run the build command with different simulator UDIDs.</p>

<h3 id="clearing-deriveddata">Clearing DerivedData</h3>

<p>When left to its own devices (literally), sometimes Claude will get frustrated when a build is failing continuously and it can’t figure out how to fix things. It will sometimes try to remove the entire DerivedData folder. This is a bad idea because 1. clearing DerivedData usually doesn’t fix the underlying problem and 2. it will temporarily break Xcode’s ability to read your Swift packages and you’ll need to restart Xcode to get everything working again.</p>

<p>After I got my build commands more streamlined, Claude stopped doing this as much. But I still have decently strict permissions, so when it does happen, the session will usually block on any <code class="language-plaintext highlighter-rouge">rm</code> command and I’ll get a chance to step in and reprimand it. If you run into this problem, you can dig deeper into a configuration-based solution and modify your permissions, add hooks, or add more to your CLAUDE.md. Just something to look out for.</p>

<h2 id="step-2-installing--launching">Step 2: Installing &amp; Launching</h2>

<p>Building should streamline a lot of your Claude Code workflow. But I slept on the automated install &amp; launch step for too long.</p>

<p>When properly set up with step 1, you should be able to wait for Claude Code to build its changes and return control to you. Then you can tab over to Xcode and hit “run without building” to handle the install &amp; launch.</p>

<p>But when you’re doing build-&gt;install-&gt;launch dozens of times a day, it’s way more streamlined to check Claude’s session output then tab over to the simulator and tap through screens to test out the changes.</p>

<h3 id="prerequisites-1">Prerequisites</h3>

<h4 id="document-the-app-binary-location-for-your-scheme">Document the app binary location for your scheme</h4>

<p>Ask Claude to find the location of the app binary produced by the build command.</p>

<p>Since my setup has DerivedData in the project folder and a build directory inside it, that’s where my app binary is: <code class="language-plaintext highlighter-rouge">DerivedData/Build/Products/Debug-iphonesimulator/Eki Bright.app</code>.</p>

<p>You’ll notice the folder: <code class="language-plaintext highlighter-rouge">Debug-iphonesimulator</code>, which corresponds to our build configuration of <code class="language-plaintext highlighter-rouge">Debug</code> from earlier and the platform <code class="language-plaintext highlighter-rouge">iphonesimulator</code>. If you go off the beaten path and want to try out a <code class="language-plaintext highlighter-rouge">Release</code> build for example, make sure to understand this relationship.</p>

<p>Also be cautious because you want to make sure the most recent build is what you’re installing and launching and looking at. And there’s nothing in the file name that will indicate that.</p>

<h4 id="find-your-bundle-identifier">Find your bundle identifier</h4>

<p>This will be in your Target’s general settings pane beside Bundle Identifier: <code class="language-plaintext highlighter-rouge">com.twocentstudios.train-timetable</code></p>

<div class="caption-wrapper"><img class="caption" src="/images/closing-loop-cc-bundle-id.jpg" width="" height="400" alt="Bundle identifier in Xcode target settings" title="Bundle identifier in Xcode target settings" /><div class="caption-text">Bundle identifier in Xcode target settings</div></div>

<h3 id="installing-the-app-on-the-simulator">Installing the app on the simulator</h3>

<p>Installing is copying over the app binary into a specific simulator’s storage. <strong>This step depends on the build step having produced an app binary.</strong></p>

<p>The parameters in the install command are:</p>

<ul>
  <li><strong>UDID</strong>: for least headaches this should be the same simulator UDID you specified in the build command.</li>
  <li><strong>path/to/My App.app</strong>: the app binary location specified by your scheme.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Example: install a previously built app binary on the simulator by UDID
xcrun simctl install DB0531E0-B47E-42AC-9AAB-FEB76D3D563A "DerivedData/Build/Products/Debug-iphonesimulator/Eki Bright.app"
</code></pre>
</div>

<h3 id="launching-the-app-on-the-simulator">Launching the app on the simulator</h3>

<p>Launching the equivalent of tapping your app’s icon in Springboard. It of course depends on the install step having copied over the app binary.</p>

<p>The parameters in the install command are:</p>

<ul>
  <li><strong>UDID</strong>: the simulator UDID you specified in the build &amp; install commands.</li>
  <li><strong>bundle id</strong>: apps are uniquely identified by bundle id after installation.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Example: launch a previously installed app binary by bundle id
xcrun simctl launch DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable
</code></pre>
</div>

<h3 id="navigating-by-url-bonus">Navigating by URL (bonus)</h3>

<p>Depending on your app’s navigation structure and pre-existing support for universal links or App Intents, you can save yourself even more time by having Claude automatically navigate the app to the tab, sheet, or navigation destination you’re currently testing.</p>

<p>The full set of caveats is beyond the scope of this post. In my experience, adding Universal Links support without some caution can lead to giving Claude access to data or flows that are impossible for normal app users to see. It may also add maintenance burden for initializers that are only used during debug. Regardless, jumping through a dozen screens automatically can save you hours of unnecessary manual screen-clicking labor.</p>

<p>The parameters for the openurl command are:</p>

<ul>
  <li><strong>UDID</strong>: the simulator UDID you specified in the build &amp; install commands.</li>
  <li><strong>URL</strong>: the deep link URL your app knows how to process.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun simctl openurl DB0531E0-B47E-42AC-9AAB-FEB76D3D563A "train-timetable://tab?name=search"
</code></pre>
</div>

<p>In my testing, it’s safe to have Claude to run the <code class="language-plaintext highlighter-rouge">openurl</code> command <em>immediately</em> after the <code class="language-plaintext highlighter-rouge">install</code> command (or even in the same line) without needing a <code class="language-plaintext highlighter-rouge">sleep</code> or otherwise waiting for the launch to complete.</p>

<h2 id="step-3-reading-console--log-output">Step 3: Reading Console &amp; Log Output</h2>

<p>With Step 1, Claude has access to the compiler’s evaluation of its code changes. We can also give Claude access to the console and log outputs so it can evaluate the runtime results.</p>

<p><strong>There are two strategies</strong>: console output via <code class="language-plaintext highlighter-rouge">print</code> statements and log output via <code class="language-plaintext highlighter-rouge">OSLog</code>/<code class="language-plaintext highlighter-rouge">Logger</code>. I use both depending on the situation.</p>

<p>Depending on the strategy, we’ll either amend the launch command from step 2 or prepend a CLI command.</p>

<h3 id="blocking-vs-non-blocking">Blocking vs. non-blocking</h3>

<p>Claude can do <em>blocking</em> and <em>non-blocking</em> for the console variant, and <em>non-blocking</em>-only for the log output.</p>

<p><em>Blocking</em> means that the prompt input and Claude’s thinking will be suspended until you explicitly stop it or the default timeout (currently 10 minutes) triggers. It will print output from the command inline, but usually truncate portions.</p>

<p><em>Non-blocking</em> means Claude will use its background capability to keep the command alive and retain access to its output but immediately move the command to the background so that the prompt input is available.</p>

<p>I recommend the <em>blocking</em> flow for when you want to add a few quick print statements to verify a limited (maybe less than 15 seconds) code execution flow that you, the human, are driving in the simulator and have Claude immediately evaluate the results inline. The amount of lines generated should be small, within 10s of lines.</p>

<p>I recommend <em>non-blocking</em> for all other scenarios, including:</p>

<ul>
  <li>when you want Claude to drive the simulator (discussed in step 4) while monitoring the output.</li>
  <li>when you want to use <code class="language-plaintext highlighter-rouge">Logger</code> instead of <code class="language-plaintext highlighter-rouge">print</code> logging, probably for more permanent logging code in your codebase.</li>
  <li>when you’re expecting to generate dozens or hundreds of lines of logs in a single run. In order to be smart about preserving the session context, you’ll want to write to a file and allow either a subagent to extract meaning from it, or have the primary agent use parsing tools to read only the relevant portions.</li>
</ul>

<h3 id="--terminate-running-process"><code class="language-plaintext highlighter-rouge">--terminate-running-process</code></h3>

<p>Adding the <code class="language-plaintext highlighter-rouge">--terminate-running-process</code> flag to <code class="language-plaintext highlighter-rouge">launch</code> ensures idempotency by terminating any existing instance of your app and ensuring the app is always cold launched with the console output available.</p>

<p>Adding the <code class="language-plaintext highlighter-rouge">--terminate-running-process</code> is super important to the logging flow since you may not be rebuilding and reinstalling between launches.</p>

<p>When you don’t terminate an existing process, the app instance will stay in memory on the simulator. By default, the <code class="language-plaintext highlighter-rouge">launch</code> command will <strong>not</strong> relaunch the app if it’s already launched. This will happen silently. Critically, it will also <strong>not</strong> read any console output and Claude will get very confused about why nothing is being logged and it will start thrashing and making very dumb changes, ranging from adding more print commands to clearing DerivedData.</p>

<p><strong>(This was my biggest roadblock in getting a reliable and robust debugging flow with Claude; please learn from my mistakes).</strong></p>

<h3 id="launching-the-app-on-simulator-and-reading-the-output">Launching the app on simulator and reading the output</h3>

<p>Replace the <code class="language-plaintext highlighter-rouge">launch</code> commands from step 2 with any of the below variants depending on your use case.</p>

<h4 id="blocking-consoleprint-direct-when-you-know-output-volume-is-reasonable">Blocking console/print direct (when you know output volume is reasonable)</h4>

<p>Relevant flags and parameters:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">--console-pty</code></strong>: produce console print output.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">--terminate-running-process</code></strong>: as discussed above, ensure the command actually runs.</li>
  <li><strong>UDID</strong> - the simulator UDID you specified in the build &amp; install commands.</li>
  <li><strong>bundle id</strong> - bundle id of the target that produces the app binary.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Example with simulator UDID and bundle id
xcrun simctl launch --console-pty --terminate-running-process DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable
</code></pre>
</div>

<p>Note: the flags <code class="language-plaintext highlighter-rouge">--stdout --stderr</code> do not work. Don’t use them. Use <code class="language-plaintext highlighter-rouge">--console-pty</code> instead.</p>

<h4 id="blocking-consoleprint-to-file-safer-for-unknown-or-expected-heavy-output">Blocking console/print to file (safer for unknown or expected heavy output)</h4>

<p>Relevant flags and parameters:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">--console-pty</code></strong>: produce console print output.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">--terminate-running-process</code></strong>: as discussed above, ensure the command actually runs.</li>
  <li><strong>UDID</strong>: the simulator UDID you specified in the build &amp; install commands.</li>
  <li><strong>bundle id</strong>: bundle id of the target that produces the app binary.</li>
  <li><strong>output file path</strong>: the plain text file console output will be written to. Note: I write to a tmp folder within DerivedData to ensure Claude has access to the result without triggering unnecessary permissions dialogs.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">2&gt;&amp;1</code></strong>: ensure stdout &amp; stderr both end up in the file.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun simctl launch --console-pty --terminate-running-process DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable &gt; DerivedData/tmp/console.log 2&gt;&amp;1
</code></pre>
</div>

<h4 id="non-blocking-consoleprint">Non-blocking console/print</h4>

<p>Non-blocking requires using Claude Code’s <code class="language-plaintext highlighter-rouge">run_in_background</code> parameter on the <code class="language-plaintext highlighter-rouge">Bash</code> tool. This will produce a <code class="language-plaintext highlighter-rouge">task_id</code> that Claude can later use to get the output (from an implicitly created text file) and kill the task.</p>

<p>After running the <code class="language-plaintext highlighter-rouge">Bash</code> tool, the prompt will be unblocked and you can ask Claude to monitor the output or ask it do anything else you want.</p>

<p>The non-blocking flow requires a bit more ceremony; you’ll need to tell Claude when you’re done working with the simulator and it should analyze the results. It usually leaves the background task running (potentially writing log data to the output), so you’ll need to specifically tell it to stop.</p>

<p>The command itself is the same as the one from <em>Blocking console/print direct</em>.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>Bash(
  command: "xcrun simctl launch --console-pty --terminate-running-process DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable",
  run_in_background: true
)

Command running in background with ID: b8e2ca5.

# *wait for next user prompt*

TaskOutput(task_id: "b8e2ca5")
KillShell(shell_id: "b8e2ca5")
</code></pre>
</div>

<h4 id="non-blocking-loggeroslog">Non-blocking Logger/OSLog</h4>

<p>With only its training data, Claude knows how to use <a href="https://developer.apple.com/documentation/os/logging">Logging</a> by importing the OSLog framework. OSLog has strengths and weaknesses compared to console/print logging. You may already be using it in your app. I consider it more of a long term solution you’d add to your codebase alongside each feature and keep it up to date with any changes.</p>

<p>Giving Claude access to these logs is different from the print/console flow we just discussed.</p>

<p>The root command is <code class="language-plaintext highlighter-rouge">xcrun simctl spawn</code>.</p>

<p><code class="language-plaintext highlighter-rouge">spawn log stream</code> only captures logs emitted while it’s running (not before). If you want logs starting from launch, always run it before the <code class="language-plaintext highlighter-rouge">launch</code> command.</p>

<p>Blocking on <code class="language-plaintext highlighter-rouge">spawn log stream</code> doesn’t make sense because you still need to launch the app. You should dispatch it directly to the background as non-blocking.</p>

<p>Relevant flags and parameters (Claude knows how to adjust these freely):</p>

<ul>
  <li><strong>UDID</strong> - the simulator UDID you specified in the build &amp; install commands.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">--level</code></strong>: matches the log level in your code; <code class="language-plaintext highlighter-rouge">debug</code>, <code class="language-plaintext highlighter-rouge">info</code>, <code class="language-plaintext highlighter-rouge">warning</code>, <code class="language-plaintext highlighter-rouge">error</code>, etc.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">--predicate</code></strong>: filters the firehose output the messages you’re interested in. Lots of options here depending on how you’ve defined <code class="language-plaintext highlighter-rouge">Logger</code>s and added log statements in your codebase.</li>
</ul>

<p>After <code class="language-plaintext highlighter-rouge">spawn log stream</code> is dispatched to the background, you’ll need to launch the app with the <code class="language-plaintext highlighter-rouge">launch</code> command. You can choose a blocking or non-blocking <code class="language-plaintext highlighter-rouge">launch</code> command.</p>

<p>Note that the raw <code class="language-plaintext highlighter-rouge">spawn log stream</code> command is not actually monitoring the specific app process. You can start this early in your session, cast a wide net, and keep this running through your whole session, asking Claude to filter the relevant time periods from the output. I personally haven’t needed this flow though.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>Bash(
  command: "xcrun simctl spawn DB0531E0-B47E-42AC-9AAB-FEB76D3D563A log stream --level=debug --predicate 'subsystem == "com.twocentstudios.train-timetable"')"
  run_in_background: true
)

Command running in background with ID: b8e2ca5.

Bash(xcrun simctl launch --terminate-running-process DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable)

# *blocking prompt until user escapes*

TaskOutput(task_id: "b8e2ca5")
KillShell(shell_id: "b8e2ca5")
</code></pre>
</div>

<h4 id="non-blocking-consoleprint--loggeroslog">Non-blocking console/print &amp; Logger/OSLog</h4>

<p>You can combine everything above and give Claude access to both console/print output and Logger/OSLog output. The <code class="language-plaintext highlighter-rouge">launch</code> command can be blocking or non-blocking, but the below example is non-blocking.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>Bash(
  command: "xcrun simctl spawn DB0531E0-B47E-42AC-9AAB-FEB76D3D563A log stream --level=debug --predicate 'subsystem == "com.twocentstudios.train-timetable"')"
  run_in_background: true
) 
Command running in background with ID: b8e2ca5.

Bash(
  command: "xcrun simctl launch --console-pty --terminate-running-process DB0531E0-B47E-42AC-9AAB-FEB76D3D563A com.twocentstudios.train-timetable",
  run_in_background: true
)
Command running in background with ID: a792db1.

# *wait for next user prompt*
</code></pre>
</div>

<h2 id="step-4-controlling--viewing-the-ios-simulator">Step 4: Controlling &amp; Viewing the iOS simulator</h2>

<p>Giving Claude eyes and virtual fingers to see and control the iOS simulator is where we start to reach the avant-garde. At the current (end of 2025) model &amp; harness capabilities things start to go off the rails pretty quickly. I wouldn’t expect great results from Claude at tasks related to manipulating the simulator like a human, but in certain scenarios, the benefits outweigh the costs.</p>

<h3 id="prerequisites-2">Prerequisites</h3>

<h4 id="axe">AXe</h4>

<blockquote>
  <p><a href="https://github.com/cameroncooke/AXe">AXe</a> is a comprehensive CLI tool for interacting with iOS Simulators using Apple’s Accessibility APIs and HID (Human Interface Device) functionality.</p>
</blockquote>

<p>Claude can use AXe to manipulate the simulator through taps, swipes, button presses, and keyboard typing.</p>

<p>Under the hood, AXe uses Facebook’s <a href="https://github.com/facebook/idb">idb</a> CLI.</p>

<p>Install AXe with Homebrew.</p>

<h4 id="image-magick-optional">Image Magick (optional)</h4>

<blockquote>
  <p><a href="https://github.com/ImageMagick/ImageMagick">ImageMagick</a>® is a free and open-source software suite, used for editing and manipulating digital images.</p>
</blockquote>

<p>Claude can use ImageMagick to do some post-processing on screenshots from the simulator.</p>

<p>Install ImageMagick with Homebrew.</p>

<h4 id="ffmpeg-optional">FFmpeg (optional)</h4>

<p>Claude can use the venerable <a href="https://www.ffmpeg.org/">FFmpeg</a> CLI for advanced video manipulation use cases. You may not need it but there’s a good chance you already have it.</p>

<h3 id="reading-from-the-simulator">Reading from the simulator</h3>

<p>In order to navigate the simulator beyond the universal links <code class="language-plaintext highlighter-rouge">openurl</code> use case we detailed above, Claude needs to be able to see the current state of the simulator.</p>

<p>There are 3 options for this:</p>

<ul>
  <li><strong>Accessibility info</strong> - Claude can read a hierarchical text description of the current screen using accessibility info.</li>
  <li><strong>Screenshots</strong> - Claude can take a screenshot of the simulator and use the <code class="language-plaintext highlighter-rouge">Read</code> tool to access its multimodal capabilities.</li>
  <li><strong>Video</strong> - Claude can record a short video capture of the simulator, slice it up into frames, and read a few to assess an animation.</li>
</ul>

<h4 id="accessibility-info-via-describe-ui">Accessibility info via <code class="language-plaintext highlighter-rouge">describe-ui</code></h4>

<p>The AXe command for getting the accessibility trace is:</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>axe describe-ui --udid SIMULATOR_UDID

  ...
      {
        "frame": {"y": 82, "x": 346, "width": 36, "height": 36},
        "AXLabel": "閉じる",
        "type": "Button"
      }
  ...
</code></pre>
</div>

<p>The output is a big JSON array.</p>

<p>I thought Claude would be better at understanding and navigation with text information than image information, but in practice it almost always ignored my instructions in CLAUDE.md to use <code class="language-plaintext highlighter-rouge">describe-ui</code> before the screenshot flow. Perhaps there’s something in the system prompt or it’s less efficient to hunt through all the text.</p>

<p>I also immediately ran into a <a href="https://github.com/cameroncooke/AXe/issues/8">reported issue</a> in AXe and idb where <code class="language-plaintext highlighter-rouge">describe-ui</code> does not print tab or toolbar info, perhaps only from iOS 26. This makes it very difficult to deterministically do any sort of navigation from the root in many apps.</p>

<p>All this is to say that, at the moment, it’s more reliable to use screenshots.</p>

<h4 id="screenshots">Screenshots</h4>

<p>Claude can use <code class="language-plaintext highlighter-rouge">simctl</code> to get screenshots.</p>

<p>Like the other commands, I prefer to write to a tmp folder within DerivedData.</p>

<p>Screenshots for most simulators are taken at <code class="language-plaintext highlighter-rouge">3x</code> scale, but input taps and swipes are at <code class="language-plaintext highlighter-rouge">1x</code>. For the dual purposes of 1. reducing the amount of calculation required to translate screen position to next tap position and 2. reducing the amount of image data that needs to be sent to and processed by Claude, I automatically resize all screenshots to <code class="language-plaintext highlighter-rouge">1x</code> via <code class="language-plaintext highlighter-rouge">magick</code>.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun simctl io DB0531E0-B47E-42AC-9AAB-FEB76D3D563A screenshot DerivedData/tmp/screen.png &amp;&amp; magick DerivedData/tmp/screen.png -resize 33.333% DerivedData/tmp/screen_1x.png
</code></pre>
</div>

<h4 id="video">Video</h4>

<p>Reading live or even recorded video is currently beyond Opus 4.5’s capabilities. I’m guessing this will be a supported flow sometime in 2026, but until then analyzing video output of the simulator is still at proof-of-concept maturity.</p>

<p>While I was debugging a tricky animation, I gave Claude some leash to test whether it could:</p>

<ul>
  <li>start recording a short clip immediately before a tap.</li>
  <li>stop the recording after 2 seconds.</li>
  <li>use FFmpeg to grab 5 or 6 frames spaced out across the video.</li>
  <li>read the frames and analyze the motion.</li>
</ul>

<p>It sort of worked? Not really? If you have a use case, you can try experimenting more with this flow. For now I’d consider the actual animation analysis a human-only endeavor. But Claude can still help get the simulator staged up to the start screen.</p>

<p>I believe I used this AXe command as a Claude Code background task:</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>axe record-video --udid DB0531E0-B47E-42AC-9AAB-FEB76D3D563A --fps 30 --output DerivedData/tmp/recording.mp4
</code></pre>
</div>

<h3 id="manipulating-the-simulator-with-taps-and-swipes">Manipulating the simulator with taps and swipes</h3>

<p>AXe has a variety of tap and gesture commands. Claude can tap on points or accessibility labels.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Tap at logical coordinates (use frame center from describe-ui)</span>
axe tap -x 201 -y 297 --udid DB0531E0-B47E-42AC-9AAB-FEB76D3D563A --post-delay 0.5
</code></pre>
</div>

<p>Without additional guidance, <strong>Claude gets confused about which scroll command maps to what logical direction</strong>.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Scroll (named by finger direction, not content direction)</span>
<span class="c"># scroll-up = finger UP = content UP = see content BELOW = triggers .onScrollDown</span>
<span class="c"># scroll-down = finger DOWN = content DOWN = see content ABOVE</span>
axe gesture scroll-down --udid DB0531E0-B47E-42AC-9AAB-FEB76D3D563A --post-delay 0.5
axe gesture scroll-up --udid DB0531E0-B47E-42AC-9AAB-FEB76D3D563A --post-delay 0.5
</code></pre>
</div>

<p>It’s useful to note the <code class="language-plaintext highlighter-rouge">swipe-from-left-edge</code> gesture because it’s the quickest way for Claude to pop back a level in a <code class="language-plaintext highlighter-rouge">NavigationStack</code>.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Edge swipes (for back navigation, etc.)</span>
axe gesture swipe-from-left-edge --udid DB0531E0-B47E-42AC-9AAB-FEB76D3D563A --post-delay 0.5
</code></pre>
</div>

<h3 id="strategies-for-increasing-tap-accuracy">Strategies for increasing tap accuracy</h3>

<p>The most significant source of indeterministic behavior is in Claude’s ability to accurately measure of coordinates on screen. In other words, it can’t read an image and always find the center point of a button. This means there is plenty of opportunity for situations like:</p>

<ul>
  <li>Claude reads a screen and wants to tap a button.</li>
  <li>Claude makes a bad guess and taps above the button.</li>
  <li>Claude reads the screen again. There was no change.</li>
  <li>Claude makes another bad guess and taps below the button.</li>
</ul>

<p>Claude’s only feedback about whether its tap was successful is based on its next screenshot. This can lead to situations where it gets irrecoverably lost while navigating your app:</p>

<ul>
  <li>Claude reads a screen and wants to tap a button.</li>
  <li>Claude makes a bad guess and taps above the button, hitting a completely different button.</li>
  <li>Claude reads the screen again.</li>
  <li>Claude sees it’s on a different screen than expected and becomes confused.</li>
</ul>

<p>I came up with an experimental flow to try to improve Claude’s accuracy, but:</p>

<ul>
  <li>It slows down the entire process by 2x.</li>
  <li>By the time Claude realizes it needs to use the experimental flow, it’s already too far lost to recover.</li>
</ul>

<p>Regardless, my flow, also using ImageMagick, is to make Claude draw a red circle on a screenshot in its targeted tap location before actually performing the tap:</p>

<ol>
  <li>Take screenshot and resize to 1x (so pixels = points):
    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>xcrun simctl io DB0531E0-B47E-42AC-9AAB-FEB76D3D563A screenshot DerivedData/tmp/screen.png <span class="o">&amp;&amp;</span> magick DerivedData/tmp/screen.png -resize 33.333% DerivedData/tmp/screen_1x.png
</code></pre>
    </div>
  </li>
  <li>Read the 1x image and estimate target element center in points</li>
  <li>Verify guess by drawing a red box at those coordinates:
    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>magick DerivedData/tmp/screen_1x.png -fill none -stroke red -strokewidth 2 -draw <span class="s2">"rectangle </span><span class="k">$((</span>X-30<span class="k">))</span><span class="s2">,</span><span class="k">$((</span>Y-30<span class="k">))</span><span class="s2"> </span><span class="k">$((</span>X+30<span class="k">))</span><span class="s2">,</span><span class="k">$((</span>Y+30<span class="k">))</span><span class="s2">"</span> DerivedData/tmp/screen_marked.png
</code></pre>
    </div>
  </li>
  <li>Read marked image to check if box is on target</li>
  <li>If missed, adjust coordinates and repeat from step 3</li>
  <li>If correct, tap at the verified coordinates</li>
</ol>

<div class="caption-wrapper"><img class="caption" src="/images/closing-loop-cc-tap-accuracy.jpg" width="" height="400" alt="Tap accuracy verification flow - original screenshot, marked target, and result after tap" title="Tap accuracy verification flow - original screenshot, marked target, and result after tap" /><div class="caption-text">Tap accuracy verification flow - original screenshot, marked target, and result after tap</div></div>

<h3 id="putting-it-all-together">Putting it all together</h3>

<p>So far in practice, I’ve used this capability alongside universal links to fix and verify simple visual bugs. I have Claude craft input to reproduce the error and find the screen where it occurs, take a “before” screenshot, implement the fix, build/install/launch, then find the same screen, verify the fix, and take an “after” screenshot.</p>

<p>It takes way longer for Claude to do than me, but it’s mostly tedious work, and I’m usually in another tab working on a plan with another Claude. When I come back and see the before and after screenshots alongside the code change, I can feel confident in Claude’s work.</p>

<h2 id="step-5-building-installing-launching-reading-output-on-a-physical-device">Step 5: Building, Installing, Launching, Reading Output on a Physical Device</h2>

<p>Finally, for those Apple SDKs that only work on device, for ensuring observed buggy behavior isn’t just a simulator quirk, or just to get a more realistic look at our apps in context, we can implement steps 1, 2, and 3 on a physical device. Unfortunately, as far as I can tell, there’s no way to control a physical device via CLI tool, so step 4 is out reach for now.</p>

<p>However, building, installing, launching, and logging can still save some time and annoyance during iterative debugging sessions. It’s especially useful to have Claude help analyze logs for (underdocumented) frameworks like Core Location that behave wildly different on a real device than on the simulator.</p>

<p>Below is a collection of tested CLI commands for doing all the above tasks on a physical device.</p>

<p>Note that in my testing all the relevant commands below work equally for devices on the same network and devices connected directly to your Mac via USB.</p>

<h3 id="prerequisites-3">Prerequisites</h3>

<h4 id="get-devices">Get devices</h4>

<p>The device <strong>Name</strong> and <strong>Identifier</strong> are both important for on-device debugging. <strong>State</strong> will be <code class="language-plaintext highlighter-rouge">available</code> when Wi-Fi debugging is available, and <code class="language-plaintext highlighter-rouge">connected</code> when directly connect via USB.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Get all connected devices</span>
xcrun devicectl list devices

Name          Hostname                      Identifier                             State                Model                                
-----------   ---------------------------   ------------------------------------   ------------------   -------------------------------------
CT<span class="s1">'s iPhone   CTs-iPhone.coredevice.local   ABCDEF01-1111-5555-AAAA-F7D81A900001   connected (no DDI)   iPhone 14 Pro (iPhone15,2)           
CT’s iPad     CTs-iPad.coredevice.local     ABCDEF01-2222-6666-BBBB-F44A19F00002   available            iPad Pro (11-inch) (iPad8,1)         
CT’s iPad     CTs-iPad-1.coredevice.local   ABCDEF01-3333-7777-CCCC-D33889000003   unavailable          iPad mini (5th generation) (iPad11,1)
</span></code></pre>
</div>

<p>Some example use cases for parsing out values in one go:</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Get the Identifier of the first accessible iPhone (WiFi or USB)
xcrun devicectl list devices | grep "iPhone" | grep -E "(available|connected)" | head -1 | grep -Eo '[A-F0-9]{8}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{12}'

ABCDEF01-1111-5555-AAAA-F7D81A900001
</code></pre>
</div>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Get the name of the first accessible iPhone (WiFi or USB)
xcrun devicectl list devices | grep "iPhone" | grep -E "(available|connected)" | head -1 | awk -F'  +' '{print $1}'

CT's iPhone
</code></pre>
</div>

<h3 id="build-for-device">Build for device</h3>

<p>Build commands are the same as those for the simulator, except <code class="language-plaintext highlighter-rouge">platform=iphoneos</code>/<code class="language-plaintext highlighter-rouge">platform=iOS</code> instead of <code class="language-plaintext highlighter-rouge">platform=iphonesimulator</code>/<code class="language-plaintext highlighter-rouge">platform=iOS Simulator</code>.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">name</code> or <code class="language-plaintext highlighter-rouge">id</code> of your target device from the <code class="language-plaintext highlighter-rouge">list devices</code> command.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Using device name
xcodebuild -project train-timetable.xcodeproj -scheme "train-timetable" -destination "platform=iphoneos,name=CT's iPhone" -derivedDataPath DerivedData build 2&gt;&amp;1 | xcsift -w

# Using device ID
xcodebuild -project train-timetable.xcodeproj -scheme "train-timetable" -destination "platform=iphoneos,id=E7E3E660-9E7A-5814-8BBB-F7D81A965CEB" -derivedDataPath DerivedData build 2&gt;&amp;1 | xcsift -w
</code></pre>
</div>

<h3 id="install-on-device">Install on device</h3>

<p>Install commands use <code class="language-plaintext highlighter-rouge">devicectl</code> but are the similar to those for the simulator, except <code class="language-plaintext highlighter-rouge">--device</code> should use the device ID, and the build product directory should use <code class="language-plaintext highlighter-rouge">Debug-iphoneos</code> instead of <code class="language-plaintext highlighter-rouge">Debug-iphonesimulator</code>.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun devicectl device install app --device E7E3E660-9E7A-5814-8BBB-F7D81A965CEB "DerivedData/Build/Products/Debug-iphoneos/Eki Bright.app"
</code></pre>
</div>

<h3 id="launch-on-device">Launch on device</h3>

<p>The vanilla launch command is below. I again recommend using <code class="language-plaintext highlighter-rouge">--terminate-existing</code>, the device equivalent of the simulator’s <code class="language-plaintext highlighter-rouge">--terminate-running-process</code>.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun devicectl device process launch --device E7E3E660-9E7A-5814-8BBB-F7D81A965CEB --console --terminate-existing com.twocentstudios.train-timetable
</code></pre>
</div>

<h3 id="blocking-consoleprint-capture-on-device">Blocking console/print capture on device</h3>

<p>For console/print capture, use the launch command above with the <code class="language-plaintext highlighter-rouge">--console</code> flag. It works over USB and Wi-Fi.</p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code>xcrun devicectl device process launch --device E7E3E660-9E7A-5814-8BBB-F7D81A965CEB --console --terminate-existing com.twocentstudios.train-timetable
</code></pre>
</div>

<h3 id="non-blocking-consoleprint-capture-on-device">Non-blocking console/print capture on device</h3>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Use run_in_background: true on Bash tool
# Works over USB and WiFi
Bash(
  command: "xcrun devicectl device process launch --device E7E3E660-9E7A-5814-8BBB-F7D81A965CEB --console --terminate-existing com.twocentstudios.train-timetable",
  run_in_background: true
)

Command running in background with ID: b8e2ca5.

# *wait for next user prompt*

TaskOutput(task_id: "b8e2ca5")
</code></pre>
</div>

<h3 id="loggeroslog-capture-on-device-requires-manual-sudo">Logger/OSLog capture on device (requires manual sudo)</h3>

<p>A downside of OSLog is that it requires <code class="language-plaintext highlighter-rouge">sudo</code> and Claude Code can’t use sudo commands directly. There are presumably some ways to give Claude this capability in more a dangerous fashion. But a safer workaround for now is for you, the human, to run the below commands in another terminal tab. Claude can give you the full command to copy/paste into the other terminal.</p>

<p>These commands will produce groups of files that Claude can read.</p>

<p>Note that the log capture is of <strong>everything on the device</strong>, and can quickly balloon to gigabytes of storage, so you’ll want to limit the time or size:</p>

<ul>
  <li>time-based filtering (<code class="language-plaintext highlighter-rouge">--last 2m</code>, <code class="language-plaintext highlighter-rouge">--start</code>, etc.)</li>
  <li>size-based limits (<code class="language-plaintext highlighter-rouge">--size</code>)</li>
</ul>

<p>Content filtering like <code class="language-plaintext highlighter-rouge">--predicate</code> is not supported. Claude will do this while reading/analyzing with <code class="language-plaintext highlighter-rouge">log show --predicate ...</code></p>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Human user must run these commands in another terminal tab (Claude Code can't provide sudo password)
# --device-name works
sudo log collect --device-name "CT's iPhone" --last 2m --output DerivedData/tmp/device-logs.logarchive

# --device-udid does not work - `log: failed to create archive: Device not configured (6)`
# sudo log collect --device-udid 12345678-9E7A-5814-8BBB-0123456789EAB --last 2m --output DerivedData/tmp/device-logs.logarchive
</code></pre>
</div>

<div class="language-plaintext highlighter-rouge"><pre class="highlight"><code># Then analyze with log show (Claude Code can do this)
log show DerivedData/tmp/device-logs.logarchive --predicate 'subsystem == "com.twocentstudios.train-timetable"'
</code></pre>
</div>

<h2 id="final-thoughts">Final thoughts</h2>

<h3 id="how-to-parameterize-names-ids-etc-for-these-commands">How to parameterize names, ids, etc. for these commands</h3>

<p>So far, I’ve just been hardcoding these commands with my favorite simulator UDID and project path into my CLAUDE.md. When a new version of Xcode comes out I ask Claude to update all mentions of the UDID to the most recent simulator version and it only takes a minute. Hardcoding these values leaves the least room for hallucination. When running these commands dozens of times a day, you really want consistency.</p>

<p>Other ways to handle this would be:</p>

<ul>
  <li>set environment variables at some level.</li>
  <li>add a start hook to have Claude fill in the environment variables fresh for each session.</li>
  <li>set up another layer of orchestration that handles the pool of simulators and dispatches an ID to each new Claude instance that requests one.</li>
</ul>

<p>These are all beyond the scope of this post. If you work primarily on one project with others, you probably already have some tooling for specifying the Xcode version, etc.</p>

<h3 id="why-not-include-traditional-testing">Why not include traditional testing?</h3>

<p>Arguably, TDD was the original “closing the loop” in software development. TDD has never caught on in the iOS world.</p>

<p>I dabbled with an actual Swift Testing-based testing flow for another <a href="/2025/12/25/shinkansen-live-developing-the-app-for-ios/#ocr-and-parsing-the-ticket-image">recent project</a>, and even wrote about another experimental system a few months ago in <a href="/2025/07/13/giving-claude-code-eyes-to-see-your-swiftui-views/">Giving Claude Code Eyes to See Your SwiftUI Views</a> that used snapshot testing. What I found was although tests are great for verifying correct behavior over the long term, in the short term they are super slow on iOS:</p>

<ul>
  <li>Installing and launching requires instantiating a brand new simulator for each run (e.g. <code class="language-plaintext highlighter-rouge">Clone 1</code>), which takes a long time.</li>
  <li>All builds are clean builds (this could have just been a fluke in my setup at the time though).</li>
  <li>Swift Testing does not output failures in a way that Claude can read and iterate on (again, potentially solvable).</li>
</ul>

<p>Admittedly, I didn’t spend as much time debugging these flows. Hopefully someone else will fill in the blanks for testing and write this guide.</p>

<h3 id="dont-sleep-on-simctl">Don’t sleep on <code class="language-plaintext highlighter-rouge">simctl</code></h3>

<p>The <code class="language-plaintext highlighter-rouge">simctl</code> CLI we’ve used throughout this post has a ton of other abilities that Claude can use to make our lives easier. This includes adding images to Photos, changing the system time, changing the system language, resetting privacy, resetting the keychain, and many more.</p>

<p>Ask Claude to configure your simulator on the fly instead of clicking through settings with your mouse.</p>

<h3 id="what-does-the-future-hold">What does the future hold?</h3>

<p>I’m honestly not sure how long the hard-won knowledge in this post will be relevant, given the pace of model &amp; harness capabilities. Peter Steinberger <a href="https://steipete.me/posts/2025/shipping-at-inference-speed">already says</a> Codex is good enough and doesn’t need any additional guidance about build commands or working with the simulator.</p>

<p>I can definitely see a world where Claude Code has a live feed of the simulator output it can process and react to at 60 fps, tapping and swiping with full accuracy. This is probably what’s missing in fully closing the development loop on iOS. Doing the same for a real device hopefully isn’t close behind.</p>

<p>At that point though, I’m not sure what else about development will have changed.</p>

<h3 id="going-forward">Going forward</h3>

<p>Most of the material in this guide has been slowly compiled over the month in my various CLAUDE.md files. It was great getting a chance to formalize it even if I can’t make a quickly installable Plugin or Skill to share (hopefully you understand why after reading the post). I’m looking forward to seeing how far I can take each of these steps in the near future.</p>

<h3 id="corrections">Corrections</h3>

<p>Please reach out if you find any corrections or can contribute any additional knowledge or edge cases.</p>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">twocentstudios</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li><a href="mailto:chris@twocentstudios.com">chris@twocentstudios.com</a></li>
          
          <li>
            <a href="https://github.com/twocentstudios">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>
          

          <li>
            <a href="https://hackyderm.io/@twocentstudios">
              <span class="icon">
                <svg viewBox="0 0 24 24">
                  <path fill="#828282" d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>

          
          <li>
            <a href="https://twitter.com/twocentstudios">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">twocentstudios</span>
            </a>
          </li>
          
        </ul>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
